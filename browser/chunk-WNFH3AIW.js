import{a as _}from"./chunk-W5VXLQ2X.js";import{a as w,b as L}from"./chunk-IKVQ3WGD.js";import"./chunk-VYPXM46B.js";import{a as R}from"./chunk-D23DP74C.js";import"./chunk-BB3PY2CE.js";import"./chunk-BSM3DYXS.js";import{a as S,b as c,c as h,d as F,g as x,i as C,j as y,o as E,q as N}from"./chunk-2K3ZRB22.js";import{d as v,e as b}from"./chunk-RE2VEYSQ.js";import"./chunk-H4ACMJDA.js";import"./chunk-FKPM6TIP.js";import{$a as i,Da as f,Oa as p,Qa as o,Ra as t,Sa as n,Ua as g,hb as u,ua as l,za as a}from"./chunk-GUCOMCN7.js";import"./chunk-2NFLSA4Y.js";var A=()=>["/forgot-password"],G=()=>["/register"],I=class d{constructor(m,e,r,s){this.router=m;this.fb=e;this._authService=r;this._houseService=s;this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required]]})}loginForm;onSubmit(){if(this.loginForm.valid){let m=this.loginForm.value;this._authService.login(m.email,m.password).subscribe({next:e=>{let r=e[0];if(r){alert("Login successful!"),localStorage.setItem("currentUser",JSON.stringify(r)),r.role==="representative"?this._houseService.getAllByRepre(r.id).subscribe({next:s=>{localStorage.setItem("currentHouse",s[0].id),this.router.navigate(["/representative/members"])},error:s=>{alert("erro  house!")}}):this.router.navigate(["/member/home"]);return}else alert("User not register")},error:e=>{console.log(e)}})}}static \u0275fac=function(e){return new(e||d)(a(v),a(E),a(_),a(R))};static \u0275cmp=f({type:d,selectors:[["app-login"]],decls:23,vars:5,consts:[[1,"login-section","d-flex","align-items-center","justify-content-center"],[1,"login-box","shadow","p-4","rounded"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","formControlName","email","placeholder","member@example.com or representative@example.com",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","placeholder","member123 or rep123",1,"form-control"],["type","submit",1,"btn","w-100","signin-button"],[1,"text-center","mt-3"],[1,"text-decoration-none","text-secondary",3,"routerLink"]],template:function(e,r){e&1&&(n(0,"app-nav-bar"),o(1,"section",0)(2,"div",1)(3,"h2",2),i(4,"Login"),t(),o(5,"form",3),g("ngSubmit",function(){return r.onSubmit()}),o(6,"div",4)(7,"label",5),i(8,"Email"),t(),n(9,"input",6),t(),o(10,"div",4)(11,"label",7),i(12,"Password"),t(),n(13,"input",8),t(),o(14,"button",9),i(15,"Login"),t(),o(16,"div",10)(17,"a",11),i(18,"Forgot your password?"),t(),n(19,"br"),o(20,"a",11),i(21,"New here? Create an account"),t()()()()(),n(22,"app-the-footer")),e&2&&(l(5),p("formGroup",r.loginForm),l(12),p("routerLink",u(3,A)),l(3),p("routerLink",u(4,G)))},dependencies:[N,x,S,h,F,C,y,b,w,L],encapsulation:2})};export{I as LoginComponent};
