<div class="settings-container">
  <h1 class="main-title">{{ 'SETTINGS.PAGE_TITLE' | translate }}</h1>

  <div class="settings-grid">
    <div class="settings-column">
      <div class="settings-card">
        <div class="card-header">
          <i class="pi pi-user card-icon"></i>
          <div>
            <h2 class="card-title">{{ 'PROFILE.TITLE' | translate }}</h2>
            <p class="card-subtitle">{{ 'PROFILE.SUBTITLE' | translate }}</p>
          </div>
        </div>
        <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
          <div class="field">
            <label for="name">{{ 'PROFILE.NAME_LABEL' | translate }}</label>
            <input pInputText id="name" type="text" formControlName="name">
          </div>
          <div class="field">
            <label for="email">{{ 'PROFILE.EMAIL_LABEL' | translate }}</label>
            <input pInputText id="email" type="email" formControlName="email">
          </div>
          <p-button type="submit" [label]="'PROFILE.SAVE_BUTTON' | translate" icon="pi pi-check" [disabled]="profileForm.invalid"></p-button>
        </form>
      </div>

      <div class="settings-card">
        <div class="card-header">
          <i class="pi pi-cog card-icon"></i>
          <h2 class="card-title">{{ 'SETTINGS.TITLE' | translate }}</h2>
        </div>
        <form [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
          <div class="field">
            <label for="language">{{ 'SETTINGS.LANGUAGE.LABEL' | translate }}</label>
            <p-dropdown
              [options]="[{ label: ('SETTINGS.LANGUAGE.OPTIONS.ES' | translate), value: 'es' }, { label: ('SETTINGS.LANGUAGE.OPTIONS.EN' | translate), value: 'en' }]"
              formControlName="language"
              appendTo="body">
            </p-dropdown>
          </div>

          <div class="field-switch">
            <p-inputSwitch formControlName="darkMode" inputId="darkMode"></p-inputSwitch>
            <label for="darkMode">{{ 'SETTINGS.DARK_MODE' | translate }}</label>
          </div>
          <div class="field-switch">
            <p-inputSwitch formControlName="notificationsEnabled" inputId="notificationsEnabled"></p-inputSwitch>
            <label for="notificationsEnabled">{{ 'SETTINGS.NOTIFICATIONS' | translate }}</label>
          </div>
          <p-button type="submit" [label]="'SETTINGS.SAVE_BUTTON' | translate" icon="pi pi-save"></p-button>
        </form>
      </div>

    <div class="settings-column">
      <div class="settings-card">
        <div class="card-header">
          <i class="pi pi-lock card-icon"></i>
          <div>
            <h2 class="card-title">{{ 'SECURITY.TITLE' | translate }}</h2>
            <p class="card-subtitle">{{ 'SECURITY.SUBTITLE' | translate }}</p>
          </div>
        </div>
        <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
          <div class="field">
            <label for="currentPassword">{{ 'SECURITY.CURRENT_PASSWORD_LABEL' | translate }}</label>
            <p-password inputId="currentPassword" formControlName="currentPassword" [toggleMask]="true"></p-password>
          </div>
          <div class="field">
            <label for="newPassword">{{ 'SECURITY.NEW_PASSWORD_LABEL' | translate }}</label>
            <p-password inputId="newPassword" formControlName="newPassword" [toggleMask]="true"></p-password>
          </div>
          <div class="field">
            <label for="confirmPassword">{{ 'SECURITY.CONFIRM_PASSWORD_LABEL' | translate }}</label>
            <p-password inputId="confirmPassword" formControlName="confirmPassword" [toggleMask]="true"></p-password>
            <small *ngIf="passwordForm.hasError('mismatch') && passwordForm.get('confirmPassword')?.touched" class="p-error">
              Las contrase√±as no coinciden.
            </small>
          </div>
          <p-button type="submit" [label]="'SECURITY.SAVE_BUTTON' | translate" icon="pi pi-key" styleClass="p-button-warning" [disabled]="passwordForm.invalid"></p-button>
        </form>
      </div>

      <div class="settings-card danger-zone">
        <div class="card-header">
          <i class="pi pi-exclamation-triangle card-icon"></i>
          <h2 class="card-title">{{ 'DANGER_ZONE.TITLE' | translate }}</h2>
        </div>
        <p class="danger-text">{{ 'DANGER_ZONE.WARNING_TEXT' | translate }}</p>
        <p-button [label]="'DANGER_ZONE.DELETE_ACCOUNT_BUTTON' | translate" icon="pi pi-trash" styleClass="p-button-danger" (click)="deleteAccount()"></p-button>
      </div>
    </div>
  </div>
</div>
